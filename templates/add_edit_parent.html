{% extends 'layout.html' %}

{% block title %}{% if parent.id %}编辑家长信息{% else %}添加家长信息{% endif %}{% endblock %}

{% block content %}
<h1 class="mb-4">{% if parent.id %}编辑家长信息{% else %}添加家长信息{% endif %}</h1>

<form method="POST" action="{% if parent.id %}{{ url_for('edit_parent', id=parent.id) }}{% else %}{{ url_for('add_parent') }}{% endif %}">
    <div class="mb-3">
        <label for="student_id" class="form-label">关联学生 <span class="text-danger">*</span></label>
        <select class="form-select" id="student_id" name="student_id" required>
            <option value="">请选择学生</option>
            {% for student in students %}
                <option value="{{ student.id }}" {% if parent.student_id == student.id %}selected{% endif %}>{{ student.name }} ({{ student.student_id }})</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="name" class="form-label">家长姓名 <span class="text-danger">*</span></label>
        <input type="text" class="form-control" id="name" name="name" value="{{ parent.name or '' }}" required>
    </div>
    <div class="mb-3">
        <label for="relationship" class="form-label">关系 (如：父亲、母亲)</label>
        <input type="text" class="form-control" id="relationship" name="relationship" value="{{ parent.relationship or '' }}">
    </div>
    <div class="mb-3">
        <label for="contact_phone" class="form-label">联系电话</label>
        <input type="text" class="form-control" id="contact_phone" name="contact_phone" value="{{ parent.contact_phone or '' }}">
    </div>
    <div class="mb-3">
        <label for="email" class="form-label">邮箱</label>
        <input type="email" class="form-control" id="email" name="email" value="{{ parent.email or '' }}">
    </div>
    <button type="submit" class="btn btn-primary">保存</button>
    <a href="{{ url_for('parents') }}" class="btn btn-secondary">取消</a>
</form>
{% endblock %}
