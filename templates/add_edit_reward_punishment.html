{% extends 'layout.html' %}

{% block title %}{% if record.id %}编辑奖惩记录{% else %}添加奖惩记录{% endif %}{% endblock %}

{% block content %}
<h1 class="mb-4">{% if record.id %}编辑奖惩记录{% else %}添加奖惩记录{% endif %}</h1>

<form method="POST" action="{% if record.id %}{{ url_for('edit_reward_punishment', id=record.id) }}{% else %}{{ url_for('add_reward_punishment') }}{% endif %}">
    <div class="mb-3">
        <label for="student_id" class="form-label">学生 <span class="text-danger">*</span></label>
        <select class="form-select" id="student_id" name="student_id" required>
            <option value="">请选择学生</option>
            {% for student in students %}
                <option value="{{ student.id }}" {% if record.student_id == student.id %}selected{% endif %}>{{ student.name }} ({{ student.student_id }})</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="type" class="form-label">类型 <span class="text-danger">*</span></label>
        <select class="form-select" id="type" name="type" required>
            <option value="">请选择类型</option>
            <option value="reward" {% if record.type == 'reward' %}selected{% endif %}>奖励</option>
            <option value="punishment" {% if record.type == 'punishment' %}selected{% endif %}>处分</option>
        </select>
    </div>
    <div class="mb-3">
        <label for="description" class="form-label">描述 <span class="text-danger">*</span></label>
        <textarea class="form-control" id="description" name="description" rows="3" required>{{ record.description or '' }}</textarea>
    </div>
    <div class="mb-3">
        <label for="date" class="form-label">日期 <span class="text-danger">*</span></label>
        <input type="date" class="form-control" id="date" name="date" value="{{ record.date or '' }}" required>
    </div>
    <button type="submit" class="btn btn-primary">保存</button>
    <a href="{{ url_for('rewards_punishments') }}" class="btn btn-secondary">取消</a>
</form>
{% endblock %}
